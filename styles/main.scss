@import 'reset';
@import 'mixin';
@import 'font';
@import 'nav';
@import 'footer';

body {
  width: 100%;
  height: 100%;
  font-family: 'Noto Sans TC', sans-serif;
  background-color: var(--color-white);
}

.main {
  position: relative;
  width: 90%;
  margin: 56px auto 0;
}

.main__title {
  margin-top: calc(60px + 1rem);
  margin-bottom: 1rem;
  padding: 1rem 0;

  font-size: 24px;
  font-weight: 700;
  color: var(--color-black);
}

.main__progress {
  margin: 1rem auto;
  padding: 1rem 0;

  @include flex(flex, space-between, center);
}

.main__progress__bar {
  display: inline-block;
  height: 2px;
  flex-grow: 0.3;

  background-color: var(--color-black);
}

.main__progress__bar--uncompleted {
  background-color: var(--color-gray-outline-button);
}

.main__progress__step {
  position: relative;
  width: 32px;
  height: 32px;

  @include flex(inline-flex, center, center);
  flex-shrink: 0;

  border-radius: 50%;
  @include border-solid-1px(var(--color-gray-primary));

  font-size: 16px;
}

.main__progress__step.step--1 {
  background-color: var(--color-gray-primary);
  color: var(--color-white);
}

@for $i from 1 through 3 {
  .main__progress__step.step--#{$i}::before {
    content: '#{$i}';
  }
}

.step--description {
  display: none;
  color: var(--color-black);
}

.main__progress__step {
  &.main__progress__step--completed::before {
    content: url('../images/progress-complete.svg');
    position: absolute;

    width: 100%;
    height: 100%;

    @include flex(flex, center, center);

    border-radius: 50%;
    background-color: var(--color-gray-primary);
    color: #fff;
  }
}

.main__progress__step--uncompleted {
  border-color: var(--color-gray-disable);
  color: var(--color-gray-disable);
}

.main__form__section {
  width: 100%;
}

.main__form__title {
  margin-bottom: 1.5rem;

  font-size: 24px;
  font-weight: 700;
}

.main__form__row {
  margin: 1rem auto;

  label {
    display: block;
    margin-bottom: .5rem;
    color: var(--color-gray-secondary);
  }

  input, select {
    display: inline-block;
    width: 100%;
    height: 40px;

    padding-left: 1rem;

    @include border-solid-1px(var(--color-gray-input-border));
    border-radius: 4px;
  }

  input {
    &::placeholder {
      color: var(--color-gray-placeholder);
    }
  }

  select {
    -webkit-appearance: none;
    &:invalid {
      color: var(--color-gray-placeholder);
    }
  }

  .select--wrapper {
    position: relative;

    &::before {
      content: '';
      position: absolute;
      top: 50%;
      right: 8px;

      border-style: solid;
      border-width: 6px 6px 0 6px;
      border-color: var(--color-gray-primary) transparent transparent transparent;
      transform: translateY(-50%);
    }
  }

  input[type='radio'] {
    width: 20px;
    height: 20px;
    margin: 20px;

    -webkit-appearance: none;
    border-radius: 50%;

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;

      width: 100%;
      height: 100%;

      @include border-solid-1px(var(--color-gray-primary));
      border-radius: 4px;

      opacity: 0;
      transition: .2s;
    }

    &:checked {
      box-shadow: inset 0 0 0 6px var(--color-gray-primary);
      border: none;
    }
    &:checked::before,
    &:hover::before {
      opacity: 1;
    }
  }

  input[type='radio']~label {
    margin: 0;
    display: inline-flex;
    flex-direction: column;
    flex-grow: 1;
    color: var(--color-black);
  }
}

.main__form__row--delivery {
  position: relative;

  @include flex(flex, flex-start, center);

  @include border-solid-1px(var(--color-gray-outline-button));
  border-radius: 4px;
  
  .deliver--method {
    margin-bottom: .25rem;
    font-size: 14px;
    font-weight: 700;
  }

  .deliver--time {
    font-size: 12px;
  }

  .price {
    position: absolute;
    top: 13px;
    right: 20px;
  }
}

.main__form__row--title,
.main__form__row--cardSecurity {
  display: flex;

  .main__form__row__col+.main__form__row__col {
    margin-left: 1rem;
  }

  .main__form__row__col--title {
    flex-basis: 40%;
  }

  .main__form__row__col--name {
    flex-grow: 1;
    margin-left: 1rem;
  }
}

.main__form__row__col--city {
  margin-bottom: 1rem;
}

.main__form__row--button-group {
  position: absolute;
  top: 100%;

  width: 100%;
  height: calc(46px + 2rem);

  @include flex(flex, space-between, center);

  @include border-top-1px(var(--color-gray-horizontal-line));
}

.button--step {
  height: 46px;

  @include flex(inline-flex, center, center);
  flex-grow: 1;

  border: none;
  border-radius: 8px;

  cursor: pointer;
}

.button--step--previous {
  justify-content: flex-start;

  background-color: var(--color-white);
  color: var(--color-black);

  &::before {
    content: '←';
    margin-right: 1rem;
  }
}

.button--step--next {
  background-color: var(--color-pink);
  color: var(--color-white);

  &::after {
    content: '→';
    margin-left: 1rem;
  }
}

.button--step--next--completed::after {
  content: '';
  margin-left: 0;
}

.main__chart {
  width: 100%;
  padding: 1rem;

  @include border-solid-1px(var(--color-gray-outline-button));
  border-radius: 8px;

  background-color: var(--color-chart);
  color: var(--color-black);
}

.main__chart__item {
  margin-bottom: 1rem;
  @include flex(flex, space-between, stretch);

  .item--image {
    width: 100px;
    height: 100px;
    border-radius: 4px;
    object-fit: cover;
  }

  .item--description {
    @include flex(flex, space-between, flex-end);
    flex-direction: column;
  }

  .item--title {
    text-align: right;
  }

  .item--qty {
    width: 120px;
    @include flex(flex, space-between, center);

    input {
      width: 48px;

      border: none;
      outline: none;
      text-align: center;

      &::placeholder {
        width: 100%;

        text-align: center;
        font-size: 14px;
        font-weight: 500;
        color: var(--color-black);
      }
    }

    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button {
      margin: 0;
      -webkit-appearance: none;
    }

    .item--button {
      width: 26px;
      height: 26px;

      @include flex(inline-flex, center, center);

      outline: none;
      border-radius: 50%;
      border: none;

      background-color: var(--color-gray-outline-button);
      font-size: 20px;
      cursor: pointer;
    }
  }
}

.price::before {
  content: '$';
}

.price--free::before {
  content: '';
}

.main__chart__delivery,
.main__chart__total-amount {
  @include flex(flex, space-between, flex-start);
  padding: 1rem 0;

  @include border-top-1px(var(--color-gray-outline-button));
}

.d-none {
  display: none;
}

@media screen and (min-width: 375px) {
  .main {
    margin-top: 60px;
    width: 80%;
  }

  .main__progress {
    margin-left: 0;
    width: 50%;
  }

  .step--description {
    display: inline-block;
  }

  .desktop-layout {
    @include flex(flex, space-between, flex-start);

    .main__form {
      min-height: 500px;
    
      @include flex(flex, space-between, flex-start);
      flex-direction: column;
      flex-basis: 50%;
    }

    .main__form__row--address {
      display: flex;

      .main__form__row__col--city {
        flex-basis: 40%;
      }

      .main__form__row__col--address {
        margin-left: 1rem;
        flex-grow: 1;
      }
    }

    .main__form__row__col--cardExpiredDate,
    .main__form__row__col--cardCvc {
      flex-grow: 1;
    }

    .main__chart {
      position: relative;
      top: -64px;

      flex-basis: 40%;
    }
  }

  .main__form__row--cardHolderName,
  .main__form__row--cardNumber {
    margin-left: 0;
    width: 66.67%;
  }

  .main__form__row--button-group {
    position: static;
  }

  .button--step {
    max-width: 174px;
  }

  .button--step.d-none {
    display: unset;
    visibility: hidden;
  }
}